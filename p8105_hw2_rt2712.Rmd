---
title: "p8105_hw2_rt2712"
author: "Rachel Tsong"
date: "5 October 2018"
output: github_document
---

# Problem 1

## Step 1

Load packages
```{r}
library(tidyverse)
```


## Step 2

Load and clean up data

```{r}
subway_data = (
  read_csv("./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>%
  janitor::clean_names() %>%
  select(line:entry, vending, ada) %>%
  mutate(entry = recode(entry, "YES" = TRUE, "NO" = FALSE))
)
```

### Summary of dataset

First I imported the data from the .csv file and cleaned the names so that the dataset is easier to work with. After that, I selected the columns for line, station name, station latitude and longitude, entrance type, routes served, vending, and ADA compliance. Lastly, I changed the entry column into a logical vector. The resulting data set is 1868 x 19. Right now, the data frame is not yet tidy because there are variables in the column names: route1-route11. These columns need to be reformatted so that each variable has its own column, each observation has its own row, and there is a single value in every cell.

## Step 3 

### Answer questions:

**How many distinct stations?**
```{r}
distinct(subway_data, line, station_name)
```

There are 465 unique stations. 

**How many stations are ada compliant?**
```{r}
filter(
  (distinct(subway_data, line, station_name, .keep_all = TRUE)),
  ada == TRUE)
```

84 distinct stations are ADA compliant.

**What proportion of entrances/exits without vending allow entrance?**
```{r}
filter(subway_data, vending == "NO")

filter(subway_data, vending == "NO", entry == TRUE)
```

I ran the first line of the code chunk above to tell me how many stations don't have vending and the second line to tell me how many stations that do not offer vending allow entrance. I can conclude from the resulting tibbles that 69/183 or 37.7% of stations that do not offer vending do allow entrance.

## Step 4

Reformat route # and route name, answer questions
```{r}
subway_data_tidy = gather(subway_data, key = route_number, value = route, route1:route11)

filter(
  (distinct(subway_data_tidy, line, station_name, .keep_all = TRUE)),
  route == "A"
)

filter(
  (distinct(subway_data_tidy, line, station_name, .keep_all = TRUE)),
  route == "A", ada == TRUE
)
```

There are 60 distinct subway stations that serve the A train, and 17 of these stations that serve the A train are ADA compliant.

# Problem 2

## Step 1

Load and clean up data

```{r read and clean sheet 1}
library(readxl)

trash_wheel = (
  read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", sheet = 1, range = "A2:N336") %>%
  janitor::clean_names() %>%
  drop_na(dumpster) %>% 
  mutate(sports_balls = as.integer(round(sports_balls)))
)
```

```{r read and clean precip data}
precip_2017 = (
  read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", sheet = 4, range = "A2:B14") %>% 
  janitor::clean_names() %>%
  mutate(year = "2017")
)

precip_2016 = (
  read_excel("./data/HealthyHarborWaterWheelTotals2018-7-28.xlsx", sheet = 5, range = "A2:B14") %>% 
  janitor::clean_names() %>%
  mutate(year = "2016")
)

precip_data = (
  bind_rows(precip_2016, precip_2017) %>%
  mutate(month = month.name[month]) %>%
  rename(total_inches = total)
)

```

## Step 2

**Description of Data**

In the trash_wheel data set, there are `r nrow(trash_wheel)` observations. These data show the amount of trash that Mr. Trash Wheel picked up from the Jones Falls River in Baltimore from May 2014 until July 2018. The columns in the data set show the types of trash  collected (e.g. cigarette butts, glass bottles, etc.) as well as temporal information. Additionally, the data give the number of homes powered by incineration of the trash collected. Each row represents the contents of a single full "dumpster," which is what Mr. Trash Wheel deposits the trash collected into. The median number of sports balls collected per dumpster in 2016 is `r median(trash_wheel$sports_balls[trash_wheel$year == "2016"])` balls.

The precip_data data set gives the total amount of precipitation per month for 2016 and 2017. In the original data, the units for the precipitation total per month was given in the title. I decided to provide that information directly in the column name for totals, so I renamed that column total_inches. I thought this was important information to retain to prevent ambiguity. The total amount of precipitation in 2017 was `r sum(precip_2017$total)` inches.


































